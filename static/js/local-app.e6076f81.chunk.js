(this["webpackJsonpgdevelop-ide"]=this["webpackJsonpgdevelop-ide"]||[]).push([[4],{1264:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(12),a=r.n(n)()("os"),o=function(){try{return a.userInfo().uid}catch(e){return""}}},1265:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(2),a=r(0),o=r.n(a),i=function(){var e=Object(n.a)(o.a.mark((function e(t,r){var n,a,i,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.times,a=0,i=null;case 3:if(!(a<n)){e.next=18;break}return a++,i=null,e.prev=6,e.next=9,r();case 9:return c=e.sent,e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(6),i=e.t0;case 16:e.next=3;break;case 18:throw i;case 19:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t,r){return e.apply(this,arguments)}}()},1269:function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));var n=r(2),a=r(0),o=r.n(a),i=r(12),c=r.n(i),u=r(453),s=r.n(u),l=r(1265),p=r(86),f=r(408),d=r(339),h=r(327),v=r(1270),b=r(343),m=r(40),j=r.n(m),g=c()("electron"),x=g?g.ipcRenderer:null,w=c()("fs-extra"),O=c()("path"),y=function(e,t,r){var n=O.extname(r),a=O.basename(r,n),o=Object(p.a)(a,(function(r){var a=O.join(e,r)+n;return w.existsSync(a)||t.has(a)}));return O.join(e,o)+n},P=function(){var e=Object(n.a)(o.a.mark((function e(t,r){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}throw new Error("Not supported");case 2:return e.next=4,j.a.get(t,{responseType:"arraybuffer"});case 4:return n=e.sent,a=n.data,e.next=8,x.invoke("local-file-save-from-arraybuffer",a,r);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),k=function(){var e=Object(n.a)(o.a.mark((function e(t){var r,a,i,c,u,p,m,j,g,k,S;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.project,a=t.fileMetadata,i=t.onProgress,w&&x){e.next=3;break}throw new Error("Unsupported");case 3:return c=r.getResourcesManager(),u=c.getAllResourceNames().toJSArray(),p=u.filter((function(e){var t=c.getResource(e);return Object(h.h)(t.getFile())})),m=O.dirname(a.fileIdentifier),j=O.join(m,"assets"),g=new Set,k=[],S=0,e.next=13,s.a.withConcurrency(50).for(p).process(function(){var e=Object(n.a)(o.a.mark((function e(t){var r,a,u,s,E,F,D,C;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.getResource(t),a=r.getFile(),!Object(h.e)(a)){e.next=18;break}return e.prev=3,u=Object(h.i)(r),s=u.localFilePath,E=u.extension,F=s?O.resolve(m,s):y(j,g,Object(v.a)(r.getName()+(E||""))),e.next=8,w.ensureDir(j);case 8:return e.next=10,P(a,F);case 10:r.setFile(O.relative(m,F).replace(/\\/g,"/")),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),k.push({resourceName:t,error:e.t0});case 16:e.next=29;break;case 18:return D=Object(f.e)(a)?Object(f.b)(a):Object(d.k)(a)?Object(d.b)(a):Object(b.h)(a),C=y(j,g,D),g.add(C),e.prev=21,e.next=24,Object(l.a)({times:2},Object(n.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.ensureDir(j);case 2:return e.next=4,x.invoke("local-file-download",a,C);case 4:r.setFile(O.relative(m,C).replace(/\\/g,"/"));case 5:case"end":return e.stop()}}),e)}))));case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(21),k.push({resourceName:t,error:e.t1});case 29:i(S++,p.length);case 30:case"end":return e.stop()}}),e,null,[[3,13],[21,26]])})));return function(t){return e.apply(this,arguments)}}());case 13:return e.abrupt("return",{erroredResources:k});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},2271:function(e,t,r){"use strict";var n=r(1),a=r(2),o=r(0),i=r.n(o),c=r(1263),u=r(52),s=r(12),l=r.n(s),p=r(327),f=r(472),d=l()("path"),h=l()("fs"),v=l()("electron"),b=v?v.ipcRenderer:null,m=function(){var e=Object(a.a)(i.a.mark((function e(t,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}throw new Error("Not supported.");case 2:return e.next=4,b.invoke("".concat(t,"-load"),r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),j=function(){var e=Object(a.a)(i.a.mark((function e(t){var r,n,o,c,u,s,l,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.project,n=t.resourceNames,o=d.dirname(r.getProjectFile()),c=[],u=[],s=r.getResourcesManager(),n.forEach((function(e){if(s.hasResource(e)){var t=s.getResource(e).getFile();Object(p.h)(t)?Object(p.e)(t)?console.error("Unsupported blob URL for a resource - ignoring it."):c.push({url:t,resourceName:e}):u.push({localFilePath:t,resourceName:e})}})),e.next=8,Object(f.d)({urlContainers:c,onProgress:function(e,t){}});case 8:return l=e.sent,v=new Map,e.next=12,Promise.all(l.map(function(){var e=Object(a.a)(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.error,r=t.blob,n=t.item,!r){e.next=15;break}return e.prev=2,e.t0=v,e.t1=n.resourceName,e.next=7,Object(f.a)(r);case 7:e.t2=e.sent,e.t3={dataUrl:e.t2},e.t0.set.call(e.t0,e.t1,e.t3),e.next=15;break;case 12:e.prev=12,e.t4=e.catch(2),console.error('Unable to read data from resource "'.concat(n.resourceName,'" - ignoring it.'),e.t4);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.next=14,Promise.all(u.map(function(){var e=Object(a.a)(i.a.mark((function e(t){var r,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.localFilePath,n=t.resourceName,e.prev=1,e.next=4,h.promises.readFile(d.resolve(o,r));case 4:a=e.sent,v.set(n,{localFilePath:r,dataUrl:"data:text/plain;base64,"+a.toString("base64")}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error('Unable to read local file "'.concat(r,'" - ignoring it.'),e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()));case 14:return e.abrupt("return",n.map((function(e){var t=v.get(e);if(!t)return{name:e,dataUrl:""};var r=t.localFilePath;return{name:e,dataUrl:t.dataUrl,localFilePath:r}})));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(a.a)(i.a.mark((function e(t){var r,a,o,s,l,p,f,d,h,v,b,g;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.externalEditorName,a=t.defaultName,o=t.metadataKey,s=t.resourceKind,l=t.options,p=l.project,f=l.resourceNames,d=l.resourceManagementProps,e.next=4,j({project:p,resourceNames:f});case 4:return h=e.sent,v={singleFrame:l.extraOptions.singleFrame,externalEditorData:Object(c.c)(o,l.extraOptions.existingMetadata),fps:l.extraOptions.fps,isLooping:l.extraOptions.isLooping,name:l.extraOptions.name||f[0]||a,resources:h},Object(u.t)(r),e.next=9,m(r,v);case 9:if(b=e.sent){e.next=12;break}return e.abrupt("return",null);case 12:return e.next=14,Object(c.d)({baseNameForNewResources:b.baseNameForNewResources,project:p,resources:b.resources,resourceKind:s});case 14:return g=e.sent,e.prev=15,e.next=18,d.onFetchNewlyAddedResources();case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(15),console.error("An error happened while fetching the newly added resources:",e.t0);case 23:return Object(c.a)({modifiedResources:g,metadataKey:o,metadata:l.extraOptions.singleFrame?b.externalEditorData:null}),Object(c.b)(g.map((function(e){return e.resource.getName()})),b.externalEditorData),e.abrupt("return",{resources:g.map((function(e){var t=e.resource,r=e.originalIndex;return{name:t.getName(),originalIndex:r}})),newName:b.baseNameForNewResources,newMetadata:Object(n.a)({},o,b.externalEditorData)});case 26:case"end":return e.stop()}}),e,null,[[15,20]])})));return function(t){return e.apply(this,arguments)}}(),x=[{name:"piskel-app",createDisplayName:{id:"Create with Piskel"},editDisplayName:{id:"Edit with Piskel"},kind:"image",edit:function(){var e=Object(a.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({options:t,externalEditorName:"piskel",defaultName:"New image",metadataKey:"pskl",resourceKind:"image"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{name:"Jfxr",createDisplayName:{id:"Create with Jfxr"},editDisplayName:{id:"Edit with Jfxr"},kind:"audio",edit:function(){var e=Object(a.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({options:t,externalEditorName:"jfxr",defaultName:"New sound effect",metadataKey:"jfxr",resourceKind:"audio"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{name:"Yarn",createDisplayName:{id:"Create with Yarn"},editDisplayName:{id:"Edit with Yarn"},kind:"json",edit:function(){var e=Object(a.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({options:t,externalEditorName:"yarn",defaultName:"New dialogue tree",metadataKey:"yarn",resourceKind:"json"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}];t.a=x},2272:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return k}));var n=r(6),a=r(5),o=r(9),i=r(10),c=r(11),u=r(17),s=r(415),l=r(12),p=r.n(l),f=r(2273),d=r(395),h=r(2274),v=r(331),b=r.n(v),m=r(755),j=r(2276),g=r(25),x=r(8),w=p()("electron"),O=p()("path"),y=w?w.ipcRenderer:null,P=e.gd,k=function(e){Object(o.a)(r,e);var t=Object(i.a)(r);function r(){var e;Object(n.a)(this,r);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).canDoNetworkPreview=function(){return!0},e.canDoHotReload=function(){return!0},e.state={networkPreviewDialogOpen:!1,networkPreviewHost:null,networkPreviewPort:null,networkPreviewError:null,previewGamePath:null,previewBrowserWindowOptions:null,hotReloadsCount:0,hideMenuBar:!0,alwaysOnTop:!0},e._networkPreviewSubscriptionChecker=null,e._hotReloadSubscriptionChecker=null,e._openPreviewBrowserWindow=function(){var t=e.state,r=t.previewGamePath,n=t.previewBrowserWindowOptions;n&&r&&y&&y.invoke("preview-open",{previewBrowserWindowOptions:n,previewGameIndexHtmlPath:"file://".concat(r,"/index.html"),alwaysOnTop:e.state.alwaysOnTop,hideMenuBar:e.state.hideMenuBar})},e._openPreviewWindow=function(t,r,n){e.setState({previewBrowserWindowOptions:{width:t.getGameResolutionWidth(),height:t.getGameResolutionHeight(),useContentSize:!0,title:"Preview of ".concat(t.getName()),backgroundColor:"#000000",webPreferences:{webSecurity:!1,nodeIntegration:!0,contextIsolation:!1}},previewGamePath:r,hideMenuBar:!n.getIsMenuBarHiddenInPreview(),alwaysOnTop:n.getIsAlwaysOnTopInPreview()},(function(){if(n.networkPreview){if(!y)return;y.removeAllListeners("serve-folder-done"),y.removeAllListeners("local-network-ips"),y.on("serve-folder-done",(function(t,r,n){r?e.setState({networkPreviewDialogOpen:!0,networkPreviewPort:null,networkPreviewHost:null,networkPreviewError:r}):e.setState({networkPreviewDialogOpen:!0,networkPreviewPort:n.port}),setTimeout((function(){return e._checkSubscriptionForNetworkPreview()}))})),y.on("local-network-ip",(function(t,r){e.setState({networkPreviewHost:r})})),y.send("serve-folder",{root:r}),y.send("get-local-network-ip")}else e._openPreviewBrowserWindow()}))},e._prepareExporter=function(){return Object(d.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var r=new s.a({downloadUrlsToLocalFiles:!1}),n=b()(new P.AbstractFileSystemJS,r);return{outputDir:O.join(n.getTempDir(),"preview"),exporter:new P.Exporter(n,t),gdjsRoot:t}}))},e.launchPreview=function(t){var r=t.project,n=t.layout,a=t.externalLayout;return e.getPreviewDebuggerServer().startServer().catch((function(e){console.error("Unable to start the Debugger Server for the preview:",e)})).then((function(){return e._prepareExporter()})).then((function(o){var i=o.outputDir,c=o.exporter,u=o.gdjsRoot;Object(f.a)((function(){var o=new P.PreviewExportOptions(r,i);o.setIsDevelopmentEnvironment(g.b.isDev()),o.setLayoutName(n.getName()),a&&o.setExternalLayoutName(a.getName());var s=Object(j.a)();s&&o.useWebsocketDebuggerClientWithServerAddress(s.address,""+s.port);var l=e.props.getIncludeFileHashs();for(var p in l){var f=l[p];o.setIncludeFileHash(p,f)}o.setElectronRemoteRequirePath(O.join(u,"../preview_node_modules","@electron/remote","renderer/index.js"));var d=e.getPreviewDebuggerServer().getExistingDebuggerIds(),h=t.hotReload&&!!d.length;o.setProjectDataOnlyExport(h&&t.projectDataOnlyExport),o.setFullLoadingScreen(t.fullLoadingScreen),t.fallbackAuthor&&o.setFallbackAuthor(t.fallbackAuthor.id,t.fallbackAuthor.username),c.exportProjectForPixiPreview(o),o.delete(),c.delete(),h?(d.forEach((function(t){e.getPreviewDebuggerServer().sendMessage(t,{command:"hotReload"})})),e.state.hotReloadsCount%16===0&&e._hotReloadSubscriptionChecker&&e._hotReloadSubscriptionChecker.checkUserHasSubscription(),e.setState((function(e){return{hotReloadsCount:e.hotReloadsCount+1}}))):e._openPreviewWindow(r,i,t)}),(function(e){return console.info("Preview took ".concat(e,"ms"))}))}))},e._checkSubscriptionForNetworkPreview=function(){return!e._networkPreviewSubscriptionChecker||e._networkPreviewSubscriptionChecker.checkUserHasSubscription()},e}return Object(a.a)(r,[{key:"getPreviewDebuggerServer",value:function(){return j.b}},{key:"render",value:function(){var e=this,t=this.state,r=t.networkPreviewDialogOpen,n=t.networkPreviewHost,a=t.networkPreviewPort,o=t.networkPreviewError;return Object(x.jsxs)(u.Fragment,{children:[Object(x.jsx)(m.a,{ref:function(t){return e._networkPreviewSubscriptionChecker=t},onChangeSubscription:function(){return e.setState({networkPreviewDialogOpen:!1})},id:"Preview over wifi",title:Object(x.jsx)(c.Trans,{id:"Preview over wifi"}),mode:"try"}),Object(x.jsx)(m.a,{ref:function(t){return e._hotReloadSubscriptionChecker=t},id:"Hot reloading",title:Object(x.jsx)(c.Trans,{id:"Live preview (apply changes to the running preview)"}),mode:"try"}),Object(x.jsx)(h.a,{open:r,url:n&&a?"".concat(n,":").concat(a):null,error:o,onClose:function(){return e.setState({networkPreviewDialogOpen:!1})},onExport:this.props.onExport,onRunPreviewLocally:this._openPreviewBrowserWindow})]})}}]),r}(u.Component)}).call(this,r(38))},2273:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e,t){var r=performance.now();e(),t(performance.now()-r)}},2274:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r(6),a=r(5),o=r(9),i=r(10),c=r(11),u=r(17),s=r(273),l=r(271),p=r(284),f=r(269),d=r(267),h=r(293),v=r(8),b=function(e){Object(o.a)(r,e);var t=Object(i.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r,[{key:"render",value:function(){var e=this.props,t=e.url,r=e.open,n=e.error,a=e.onExport,o=e.onClose,i=e.onRunPreviewLocally;return r?Object(v.jsxs)(s.c,{title:Object(v.jsx)(c.Trans,{id:"Preview"}),actions:[Object(v.jsx)(l.a,{label:Object(v.jsx)(c.Trans,{id:"Close"}),primary:!0,onClick:o},"close")],secondaryActions:[a&&Object(v.jsx)(l.a,{label:Object(v.jsx)(c.Trans,{id:"Export game"}),onClick:a},"export"),Object(v.jsx)(l.a,{label:Object(v.jsx)(c.Trans,{id:"Run on this computer"}),onClick:i},"run-preview-locally")],open:r,onRequestClose:o,children:[n&&Object(v.jsx)(d.c,{children:Object(v.jsx)(f.a,{children:Object(v.jsx)(c.Trans,{id:"Unable to start the server for the preview! Make sure that you are authorized to run servers on this computer. Otherwise, use classic preview to test your game."})})}),!n&&!t&&Object(v.jsx)(h.a,{}),!n&&t&&Object(v.jsxs)("div",{children:[Object(v.jsx)(d.c,{children:Object(v.jsx)(f.a,{children:Object(v.jsx)(c.Trans,{id:"Your preview is ready! On your mobile or tablet, open your browser and enter in the address bar:"})})}),Object(v.jsx)(p.b,{value:t,fullWidth:!0}),Object(v.jsx)(d.c,{children:Object(v.jsx)(f.a,{children:Object(v.jsx)(c.Trans,{id:"Please note that your device should be connected on the same network as this computer."})})})]})]}):null}}]),r}(u.Component)},2276:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return p}));var n=r(12),a=r.n(n)()("electron"),o=a?a.ipcRenderer:null,i="stopped",c=null,u=[],s=[],l={startServer:function(){if(!o)return Promise.reject();if("started"===i)return Promise.resolve();var e=new Promise((function(e,t){var r=!1;i="stopped",c=null,o&&(o.removeAllListeners("debugger-send-message-done"),o.removeAllListeners("debugger-error-received"),o.removeAllListeners("debugger-connection-closed"),o.removeAllListeners("debugger-connection-opened"),o.removeAllListeners("debugger-connection-errored"),o.removeAllListeners("debugger-start-server-done"),o.removeAllListeners("debugger-message-received")),o.on("debugger-error-received",(function(e,n){r||(t(n),r=!0),u.forEach((function(e){return(0,e.onErrorReceived)(n)}))})),o.on("debugger-connection-closed",(function(e,t){var r=t.id,n=s.indexOf(r);-1!==n&&s.splice(n,1),u.forEach((function(e){return(0,e.onConnectionClosed)({id:r,debuggerIds:s})}))})),o.on("debugger-connection-opened",(function(e,t){var r=t.id;s.push(r),u.forEach((function(e){return(0,e.onConnectionOpened)({id:r,debuggerIds:s})}))})),o.on("debugger-connection-errored",(function(e,t){var r=t.id,n=t.errorMessage;u.forEach((function(e){return(0,e.onConnectionErrored)({id:r,errorMessage:n})}))})),o.on("debugger-start-server-done",(function(t,n){var a=n.address;console.info("Local preview debugger started"),i="started",c=a,r||(e(),r=!0),u.forEach((function(e){return(0,e.onServerStateChanged)()}))})),o.on("debugger-message-received",(function(e,t){var r=t.id,n=t.message;console.info("Processing message received for debugger");try{var a=JSON.parse(n);u.forEach((function(e){return(0,e.onHandleParsedMessage)({id:r,parsedMessage:a})}))}catch(o){console.warn("Error while parsing message received from debugger client:",o)}})),o.send("debugger-start-server")})),t=new Promise((function(e,t){setTimeout((function(){t(new Error("Debugger server not started or errored after 5s - aborting."))}),5e3)}));return Promise.race([e,t])},sendMessage:function(e,t){o&&("stopped"!==i?o.send("debugger-send-message",{id:e,message:JSON.stringify(t)}):console.error("Cannot send message when debugger server is stopped."))},getServerState:function(){return i},getExistingDebuggerIds:function(){return s},registerCallbacks:function(e){return u.push(e),function(){var t=u.indexOf(e);-1!==t&&u.splice(t,1)}}},p=function(){return c}},2277:function(e,t,r){"use strict";r.d(t,"c",(function(){return j})),r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return x}));var n=r(3),a=r(2278),o=r(2279),i=r(2280),c=r(2281),u=r(2283),s=r(2284),l=r(2285),p=r(682),f=r(690),d=r(689),h=r(685),v=r(686),b=r(687),m=r(683),j=Object(n.a)(Object(n.a)({},f.c),{},{exportPipeline:l.a}),g=[Object(n.a)(Object(n.a)({},d.c),{},{exportPipeline:i.a}),Object(n.a)(Object(n.a)({},v.b),{},{exportPipeline:u.a}),Object(n.a)(Object(n.a)({},b.b),{},{exportPipeline:s.a}),Object(n.a)(Object(n.a)({},h.c),{},{exportPipeline:c.a})],x=[Object(n.a)(Object(n.a)({},d.c),{},{exportPipeline:i.a}),Object(n.a)(Object(n.a)({},p.c),{},{exportPipeline:a.a}),Object(n.a)(Object(n.a)({},m.c),{},{exportPipeline:o.a})]},2278:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return O}));var n=r(2),a=r(0),o=r.n(a),i=r(11),c=(r(17),r(275)),u=r(267),s=r(395),l=r(415),p=r(529),f=r(331),d=r.n(f),h=r(12),v=r.n(h),b=r(682),m=r(473),j=r(8),g=v()("electron"),x=g?g.shell:null,w=e.gd,O={name:"local-cordova",packageNameWarningType:"mobile",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},isNavigationDisabled:function(){return!1},renderHeader:function(e){var t=e.project,r=e.exportState,n=e.updateExportState;return Object(j.jsxs)(u.a,{noMargin:!0,children:[Object(j.jsx)(u.c,{children:Object(j.jsx)(u.a,{noMargin:!0,children:Object(j.jsx)(b.b,{})})}),Object(j.jsx)(u.c,{children:Object(j.jsx)(p.a,{type:"export",value:r.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){n((function(){return{outputDir:e}})),t.setLastCompilationDirectory(e)},fullWidth:!0})})]})},renderLaunchButtonLabel:function(){return Object(j.jsx)(i.Trans,{id:"Package"})},prepareExporter:function(e){return Object(s.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var r=new l.a({downloadUrlsToLocalFiles:!0}),n=d()(new w.AbstractFileSystemJS,r);return{exporter:new w.Exporter(n,t),localFileSystem:r}}))},launchExport:function(){var e=Object(n.a)(o.a.mark((function e(t,r,n){var a,i,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.exporter,i=r.localFileSystem,(c=new w.ExportOptions(t.project,t.exportState.outputDir)).setTarget("cordova"),n&&c.setFallbackAuthor(n.id,n.username),a.exportWholePixiProject(c),c.delete(),a.delete(),e.abrupt("return",{urlFiles:i.getAllUrlFilesIn(t.exportState.outputDir)});case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(o.a.mark((function e(t,r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.urlFiles,e.next=3,Object(m.a)({urlContainers:n,onProgress:t.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState,r=(e.onClose,function(){x&&x.openPath(t.outputDir)});return Object(j.jsx)(b.a,{renderGameButton:function(){return Object(j.jsx)(c.a,{label:Object(j.jsx)(i.Trans,{id:"Open folder"}),primary:!0,onClick:r},"open")}})}}}).call(this,r(38))},2279:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return O}));var n=r(2),a=r(0),o=r.n(a),i=r(11),c=(r(17),r(275)),u=r(267),s=r(395),l=r(415),p=r(529),f=r(331),d=r.n(f),h=r(12),v=r.n(h),b=r(683),m=r(473),j=r(8),g=v()("electron"),x=g?g.shell:null,w=e.gd,O={name:"local-electron",packageNameWarningType:"desktop",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},isNavigationDisabled:function(){return!1},renderHeader:function(e){var t=e.project,r=e.exportState,n=e.updateExportState;return Object(j.jsxs)(u.a,{noMargin:!0,children:[Object(j.jsx)(u.c,{children:Object(j.jsx)(u.a,{noMargin:!0,children:Object(j.jsx)(b.b,{})})}),Object(j.jsx)(u.c,{children:Object(j.jsx)(p.a,{type:"export",value:r.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){n((function(){return{outputDir:e}})),t.setLastCompilationDirectory(e)},fullWidth:!0})})]})},renderLaunchButtonLabel:function(){return Object(j.jsx)(i.Trans,{id:"Package"})},prepareExporter:function(e){return Object(s.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var r=new l.a({downloadUrlsToLocalFiles:!0}),n=d()(new w.AbstractFileSystemJS,r);return{exporter:new w.Exporter(n,t),localFileSystem:r}}))},launchExport:function(){var e=Object(n.a)(o.a.mark((function e(t,r,n){var a,i,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.exporter,i=r.localFileSystem,(c=new w.ExportOptions(t.project,t.exportState.outputDir)).setTarget("electron"),n&&c.setFallbackAuthor(n.id,n.username),a.exportWholePixiProject(c),c.delete(),a.delete(),e.abrupt("return",{urlFiles:i.getAllUrlFilesIn(t.exportState.outputDir)});case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(o.a.mark((function e(t,r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.urlFiles,e.next=3,Object(m.a)({urlContainers:n,onProgress:t.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState,r=(e.onClose,function(){x&&x.openPath(t.outputDir)});return Object(j.jsx)(b.a,{renderGameButton:function(){return Object(j.jsx)(c.a,{label:Object(j.jsx)(i.Trans,{id:"Open folder"}),primary:!0,onClick:r},"open")}})}}}).call(this,r(38))},2280:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return O}));var n=r(2),a=r(0),o=r.n(a),i=r(11),c=(r(17),r(275)),u=r(267),s=r(395),l=r(415),p=r(529),f=r(331),d=r.n(f),h=r(12),v=r.n(h),b=r(689),m=r(473),j=r(8),g=v()("electron"),x=g?g.shell:null,w=e.gd,O={name:"local-html5",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},isNavigationDisabled:function(){return!1},renderHeader:function(e){var t=e.project,r=e.exportState,n=e.updateExportState;return Object(j.jsxs)(u.a,{noMargin:!0,children:[Object(j.jsx)(u.c,{children:Object(j.jsx)(b.b,{})}),Object(j.jsx)(u.c,{children:Object(j.jsx)(p.a,{type:"export",value:r.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){n((function(){return{outputDir:e}})),t.setLastCompilationDirectory(e)},fullWidth:!0})})]})},renderLaunchButtonLabel:function(){return Object(j.jsx)(i.Trans,{id:"Export as a HTML5 game"})},prepareExporter:function(e){return Object(s.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var r=new l.a({downloadUrlsToLocalFiles:!0}),n=d()(new w.AbstractFileSystemJS,r);return{exporter:new w.Exporter(n,t),localFileSystem:r}}))},launchExport:function(){var e=Object(n.a)(o.a.mark((function e(t,r,n){var a,i,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.exporter,i=r.localFileSystem,c=new w.ExportOptions(t.project,t.exportState.outputDir),n&&c.setFallbackAuthor(n.id,n.username),a.exportWholePixiProject(c),c.delete(),a.delete(),e.abrupt("return",{urlFiles:i.getAllUrlFilesIn(t.exportState.outputDir)});case 7:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(o.a.mark((function e(t,r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.urlFiles,e.next=3,Object(m.a)({urlContainers:n,onProgress:t.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState;e.onClose;return Object(j.jsx)(b.a,{renderGameButton:function(){return Object(j.jsx)(c.a,{fullWidth:!0,primary:!0,onClick:function(){x&&x.openPath(t.outputDir)},label:Object(j.jsx)(i.Trans,{id:"Open the exported game folder"})})}})}}}).call(this,r(38))},2281:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return S}));var n=r(2),a=r(0),o=r.n(a),i=r(11),c=(r(17),r(275)),u=r(267),s=r(395),l=r(415),p=r(331),f=r.n(p),d=r(12),h=r.n(d),v=r(2282),b=r(684),m=r(685),j=r(473),g=r(8),x=h()("path"),w=h()("electron"),O=h()("@electron/remote"),y=O?O.app:null,P=w?w.shell:null,k=e.gd,S={name:"local-facebook-instant-games",getInitialExportState:function(e){return{archiveOutputFilename:y?x.join(y.getPath("documents"),"fb-instant-game.zip"):""}},canLaunchBuild:function(e){return!!e.archiveOutputFilename},isNavigationDisabled:function(){return!1},renderHeader:function(e){e.project;var t=e.exportState,r=e.updateExportState;return Object(g.jsxs)(u.a,{noMargin:!0,children:[Object(g.jsx)(u.c,{children:Object(g.jsx)(m.b,{})}),Object(g.jsx)(u.c,{children:Object(g.jsx)(v.a,{title:"Facebook Instant Games export zip file",message:"Choose where to save the exported file for Facebook Instant Games",filters:[{name:"Compressed file for Facebook Instant Games",extensions:["zip"]}],value:t.archiveOutputFilename,defaultPath:y?y.getPath("documents"):"",onChange:function(e){return r((function(){return{archiveOutputFilename:e}}))},fullWidth:!0})})]})},renderLaunchButtonLabel:function(){return Object(g.jsx)(i.Trans,{id:"Package"})},prepareExporter:function(e){return Object(s.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var r=new l.a({downloadUrlsToLocalFiles:!0}),n=f()(new k.AbstractFileSystemJS,r),a=new k.Exporter(n,t),o=x.join(n.getTempDir(),"FacebookInstantGamesExport");return n.mkDir(o),n.clearDir(o),{exporter:a,localFileSystem:r,temporaryOutputDir:o}}))},launchExport:function(){var e=Object(n.a)(o.a.mark((function e(t,r,n){var a,i,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.exporter,i=r.localFileSystem,c=r.temporaryOutputDir,(u=new k.ExportOptions(t.project,c)).setTarget("facebookInstantGames"),n&&u.setFallbackAuthor(n.id,n.username),a.exportWholePixiProject(u),u.delete(),a.delete(),e.abrupt("return",{temporaryOutputDir:c,urlFiles:i.getAllUrlFilesIn(c)});case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(o.a.mark((function e(t,r){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.temporaryOutputDir,a=r.urlFiles,e.next=3,Object(j.a)({urlContainers:a,onProgress:t.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",{temporaryOutputDir:n});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),launchCompression:function(e,t){var r=t.temporaryOutputDir;return Object(b.a)({path:r,outputFilename:e.exportState.archiveOutputFilename})},renderDoneFooter:function(e){var t=e.exportState,r=(e.onClose,function(){P&&x&&P.openPath(x.dirname(t.archiveOutputFilename))});return Object(g.jsx)(m.a,{renderGameButton:function(){return Object(g.jsx)(c.a,{label:Object(g.jsx)(i.Trans,{id:"Open folder"}),primary:!0,onClick:r},"open")}})}}}).call(this,r(38))},2282:function(e,t,r){"use strict";var n=r(3),a=r(2),o=r(0),i=r.n(o),c=r(11),u=(r(17),r(284)),s=r(12),l=r.n(s),p=r(271),f=r(8),d=l()("electron"),h=l()("@electron/remote"),v=h?h.dialog:null,b={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}};t.a=function(e){var t=e.value,r=e.onChange,o=e.title,s=e.message,l=e.defaultPath,m=e.fullWidth,j=e.filters,g=function(){var e=Object(a.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v&&d){e.next=2;break}return e.abrupt("return");case 2:return t=h.getCurrentWindow(),e.next=5,v.showSaveDialog(t,{title:o,filters:j,message:s,defaultPath:l});case 5:n=e.sent,a=n.filePath,r(a||"");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{style:Object(n.a)(Object(n.a)({},b.container),{},{width:m?"100%":void 0}),children:[Object(f.jsx)(u.b,{margin:"dense",style:b.textField,type:"text",translatableHintText:{id:"Choose a file"},value:t,onChange:function(e,t){return r(t)}}),Object(f.jsx)(p.a,{label:Object(f.jsx)(c.Trans,{id:"Choose"}),style:b.button,onClick:g})]})}},2283:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return y}));var n=r(2),a=r(3),o=r(0),i=r.n(o),c=r(11),u=(r(17),r(331)),s=r.n(u),l=r(351),p=r(872),f=r(395),d=r(684),h=r(12),v=r.n(h),b=r(415),m=r(686),j=r(473),g=r(8),x=v()("path"),w=v()("os"),O=e.gd,y={name:"local-online-cordova",onlineBuildType:"cordova-build",limitedBuilds:!0,packageNameWarningType:"mobile",getInitialExportState:function(){return{targets:["androidApk"],keystore:"new",signingDialogOpen:!1}},canLaunchBuild:function(e,t,r){return t||""===r},isNavigationDisabled:function(e,t){return!t&&["register","export","resources-download","compress","upload"].includes(e)},renderHeader:function(e){return Object(g.jsx)(m.a,Object(a.a)({},e))},renderLaunchButtonLabel:function(){return Object(g.jsx)(c.Trans,{id:"Create package for Android"})},prepareExporter:function(e){return Object(f.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var r=new b.a({downloadUrlsToLocalFiles:!0}),n=s()(new O.AbstractFileSystemJS,r),a=new O.Exporter(n,t),o=x.join(n.getTempDir(),"OnlineCordovaExport");return n.mkDir(o),n.clearDir(o),{exporter:a,localFileSystem:r,temporaryOutputDir:o}}))},launchExport:function(){var e=Object(n.a)(i.a.mark((function e(t,r,n){var a,o,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.exporter,o=r.localFileSystem,c=r.temporaryOutputDir,(u=new O.ExportOptions(t.project,c)).setTarget("cordova"),n&&u.setFallbackAuthor(n.id,n.username),a.exportWholePixiProject(u),u.delete(),a.delete(),e.abrupt("return",{temporaryOutputDir:c,urlFiles:o.getAllUrlFilesIn(c)});case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(i.a.mark((function e(t,r){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.temporaryOutputDir,a=r.urlFiles,e.next=3,Object(j.a)({urlContainers:a,onProgress:t.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",{temporaryOutputDir:n});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),launchCompression:function(e,t){var r=t.temporaryOutputDir,n=w.tmpdir();return Object(d.a)({path:r,outputFilename:x.join(n,"game-archive.zip")})},launchUpload:function(e,t){return Object(l.g)().then((function(r){return Object(p.a)(t,r,e.updateStepProgress).then((function(){return r.key}))}))},launchOnlineBuild:function(e,t,r,n,a){var o=t.getAuthorizationHeader,i=t.firebaseUser;return i?Object(l.a)(o,i.uid,r,e.targets,e.keystore,n,a):Promise.reject(new Error("User is not authenticated"))}}}).call(this,r(38))},2284:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return y}));var n=r(2),a=r(3),o=r(0),i=r.n(o),c=r(11),u=(r(17),r(331)),s=r.n(u),l=r(351),p=r(395),f=r(872),d=r(684),h=r(12),v=r.n(h),b=r(415),m=r(687),j=r(473),g=r(8),x=v()("path"),w=v()("os"),O=e.gd,y={name:"local-online-electron",onlineBuildType:"electron-build",limitedBuilds:!0,packageNameWarningType:"desktop",getInitialExportState:function(){return{targets:["winExe"]}},canLaunchBuild:function(e,t,r){return!!e.targets.length&&(t||""===r)},isNavigationDisabled:function(e,t){return!t&&["register","export","resources-download","compress","upload"].includes(e)},renderHeader:function(e){return Object(g.jsx)(m.a,Object(a.a)({},e))},renderLaunchButtonLabel:function(){return Object(g.jsx)(c.Trans,{id:"Package"})},prepareExporter:function(e){return Object(p.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var r=new b.a({downloadUrlsToLocalFiles:!0}),n=s()(new O.AbstractFileSystemJS,r),a=new O.Exporter(n,t),o=x.join(n.getTempDir(),"OnlineElectronExport");return n.mkDir(o),n.clearDir(o),{exporter:a,localFileSystem:r,temporaryOutputDir:o}}))},launchExport:function(){var e=Object(n.a)(i.a.mark((function e(t,r,n){var a,o,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.exporter,o=r.localFileSystem,c=r.temporaryOutputDir,(u=new O.ExportOptions(t.project,c)).setTarget("electron"),n&&u.setFallbackAuthor(n.id,n.username),a.exportWholePixiProject(u),u.delete(),a.delete(),e.abrupt("return",{temporaryOutputDir:c,urlFiles:o.getAllUrlFilesIn(c)});case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(i.a.mark((function e(t,r){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.temporaryOutputDir,a=r.urlFiles,e.next=3,Object(j.a)({urlContainers:a,onProgress:t.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",{temporaryOutputDir:n});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),launchCompression:function(e,t){var r=t.temporaryOutputDir,n=w.tmpdir();return Object(d.a)({path:r,outputFilename:x.join(n,"game-archive.zip")})},launchUpload:function(e,t){return Object(l.g)().then((function(r){return Object(f.a)(t,r,e.updateStepProgress).then((function(){return r.key}))}))},launchOnlineBuild:function(e,t,r,n,a){var o=t.getAuthorizationHeader,i=t.firebaseUser;return i?Object(l.b)(o,i.uid,r,e.targets,n,a):Promise.reject(new Error("User is not authenticated"))}}}).call(this,r(38))},2285:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return O}));var n=r(2),a=r(0),o=r.n(a),i=r(11),c=(r(17),r(331)),u=r.n(c),s=r(351),l=r(872),p=r(395),f=r(684),d=r(12),h=r.n(d),v=r(415),b=r(690),m=r(473),j=r(8),g=h()("path"),x=h()("os"),w=e.gd,O={name:"local-online-web",onlineBuildType:"web-build",getInitialExportState:function(){return null},canLaunchBuild:function(e,t,r){return t||""===r||"done"===r},isNavigationDisabled:function(e,t){return!t&&!["","done"].includes(e)},renderHeader:function(){return Object(j.jsx)(b.a,{})},renderLaunchButtonLabel:function(){return Object(j.jsx)(i.Trans,{id:"Generate link"})},renderCustomStepsProgress:function(e){var t=e.build,r=e.project,n=e.onSaveProject,a=e.errored,o=e.exportStep;return Object(j.jsx)(b.b,{build:t,project:r,onSaveProject:n,errored:a,exportStep:o})},prepareExporter:function(e){return Object(p.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var r=new v.a({downloadUrlsToLocalFiles:!0}),n=u()(new w.AbstractFileSystemJS,r),a=new w.Exporter(n,t),o=g.join(n.getTempDir(),"OnlineWebExport");return n.mkDir(o),n.clearDir(o),{exporter:a,localFileSystem:r,temporaryOutputDir:o}}))},launchExport:function(){var e=Object(n.a)(o.a.mark((function e(t,r,n){var a,i,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.exporter,i=r.localFileSystem,c=r.temporaryOutputDir,u=new w.ExportOptions(t.project,c),n&&u.setFallbackAuthor(n.id,n.username),a.exportWholePixiProject(u),u.delete(),a.delete(),e.abrupt("return",{temporaryOutputDir:c,urlFiles:i.getAllUrlFilesIn(c)});case 7:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(o.a.mark((function e(t,r){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.temporaryOutputDir,a=r.urlFiles,e.next=3,Object(m.a)({urlContainers:a,onProgress:t.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",{temporaryOutputDir:n});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),launchCompression:function(e,t){var r=t.temporaryOutputDir,n=x.tmpdir();return Object(f.a)({path:r,outputFilename:g.join(n,"game-archive.zip"),sizeLimit:25e7})},launchUpload:function(e,t){return Object(s.g)().then((function(r){return Object(l.a)(t,r,e.updateStepProgress).then((function(){return r.key}))}))},launchOnlineBuild:function(e,t,r,n,a){var o=t.getAuthorizationHeader,i=t.firebaseUser;return i?Object(s.c)(o,i.uid,r,n,a):Promise.reject(new Error("User is not authenticated"))}}}).call(this,r(38))},2286:function(e,t,r){"use strict";var n=r(32),a=r(17),o=r(12),i=r.n(o),c=r(411),u=r(1244),s=i()("electron"),l=i()("@electron/remote"),p=l?l.app:null,f=s?s.ipcRenderer:null,d=function(e){var t=e.ipcEvent,r=e.callback,n=e.shouldApply;a.useEffect((function(){if(f&&n){var e=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return r.apply(void 0,n)};return f.on(t,e),function(){return f.removeListener(t,e)}}}),[t,r,n])},h=function(e){var t=e.event,r=e.callback;a.useEffect((function(){if(p){var e=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return r.apply(void 0,n)};return p.on(t,e),function(){return p.removeListener(t,e)}}}),[t,r])},v=function(e){if(!e)return!1;var t=e.toLowerCase();return t.startsWith("gdevelop")&&"gdevelop dialogue tree editor (yarn)"!==t&&"gdevelop sound effects editor (jfxr)"!==t&&"gdevelop image editor (piskel)"!==t};t.a=function(e){var t=e.props,r=e.callbacks,o=t.i18n,i=t.project,s=t.recentProjectFiles,l=t.shortcutMap,p=o.language,b=a.useState(!0),m=Object(n.a)(b,2),j=m[0],g=m[1];h({event:"browser-window-focus",callback:function(e){g(v(e.title))}}),h({event:"browser-window-blur",callback:function(e){g(!v(e.title))}}),d({ipcEvent:"main-menu-open",callback:r.onChooseProject,shouldApply:j}),d({ipcEvent:"main-menu-open-recent",callback:r.onOpenRecentFile,shouldApply:j}),d({ipcEvent:"main-menu-save",callback:r.onSaveProject,shouldApply:j}),d({ipcEvent:"main-menu-save-as",callback:r.onSaveProjectAs,shouldApply:j}),d({ipcEvent:"main-menu-close",callback:r.onCloseProject,shouldApply:j}),d({ipcEvent:"main-menu-close-app",callback:r.onCloseApp,shouldApply:j}),d({ipcEvent:"main-menu-export",callback:r.onExportProject,shouldApply:j}),d({ipcEvent:"main-menu-create-template",callback:r.onCreateProject,shouldApply:j}),d({ipcEvent:"main-menu-create-blank",callback:r.onCreateBlank,shouldApply:j}),d({ipcEvent:"main-menu-open-project-manager",callback:r.onOpenProjectManager,shouldApply:j}),d({ipcEvent:"main-menu-open-home-page",callback:r.onOpenHomePage,shouldApply:j}),d({ipcEvent:"main-menu-open-debugger",callback:r.onOpenDebugger,shouldApply:j}),d({ipcEvent:"main-menu-open-about",callback:r.onOpenAbout,shouldApply:j}),d({ipcEvent:"main-menu-open-preferences",callback:r.onOpenPreferences,shouldApply:j}),d({ipcEvent:"main-menu-open-language",callback:r.onOpenLanguage,shouldApply:j}),d({ipcEvent:"main-menu-open-profile",callback:r.onOpenProfile,shouldApply:j}),d({ipcEvent:"main-menu-open-games-dashboard",callback:r.onOpenGamesDashboard,shouldApply:j}),d({ipcEvent:"update-status",callback:r.setElectronUpdateStatus,shouldApply:!0}),a.useEffect((function(){f&&f.send("set-main-menu",Object(u.b)({project:i,i18n:o,recentProjectFiles:s,shortcutMap:l,isApplicationTopLevelMenu:!0}))}),[o,p,i,s,l]);var x=r.onOpenRecentFile;return Object(c.b)("OPEN_RECENT_PROJECT",!0,{generateOptions:a.useCallback((function(){return s.map((function(e){return{text:e.fileMetadata.fileIdentifier,handler:function(){return x(e)}}}))}),[x,s])}),null}},2287:function(e,t,r){var n=r(1266).loadExtension,a=r(12),o=r(2288).findJsExtensionModules;e.exports=function(e){var t=e.gd,r=e.objectsEditorService,i=e.objectsRenderingService,c=e.filterExamples,u=e.onFindGDJS;return{loadAllExtensions:function(e){return o({filterExamples:c,onFindGDJS:u}).then((function(o){return Promise.all(o.map((function(o){var c=null;try{c=a(o,{rethrowException:!0})}catch(u){return{extensionModulePath:o,result:{message:"Unable to import extension. Please check for any syntax error or error that would prevent it from being run.",error:!0,rawError:u}}}return c?(r&&c.registerEditorConfigurations&&c.registerEditorConfigurations(r),i&&c.registerInstanceRenderers&&c.registerInstanceRenderers(i),{extensionModulePath:o,result:n(e,t,t.JsPlatform.get(),c)}):{extensionModulePath:o,result:{error:!0,message:"Unknown error. Please check for any syntax error or error that would prevent it from being run."}}})))}),(function(e){throw console.error("Unable to find JS extensions modules"),e}))}}}},2288:function(e,t,r){var n=r(395).findGDJS,a=r(12),o=a("path"),i=a("fs");e.exports={findJsExtensionModules:function(e){var t=e.filterExamples,r=e.onFindGDJS;return(r?r():n()).then((function(e){var r=e.gdjsRoot,n=o.join(r,"Runtime","Extensions");return console.info("Searching for JS extensions (file called JsExtension.js) in ".concat(n,"...")),new Promise((function(e,r){i.readdir(n,(function(a,c){if(a)return r(a);var u=c.filter((function(e){return!t||-1===e.indexOf("Example")}));Promise.all(u.map((function(e){return t=o.join(n,e),new Promise((function(e){var r=o.join(t,"JsExtension.js");i.stat(r,(function(t,n){return e(t?null:n.isFile()?r:null)}))}));var t}))).then((function(t){e(t.filter((function(e){return!!e})))}),r)}))}))}))}}},2289:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(12),a=r.n(n),o=r(1264),i=r(646),c=r.n(i),u=a()("path"),s=a()("os"),l=a()("fs"),p=function(e){var t=e.onWriteFile,r=u.join(s.tmpdir(),"GDGeneratedEventsFunctions-"+Object(o.a)());l.mkdir(r,(function(e){e&&"EEXIST"!==e.code&&console.error("Unable to create the directory where to output events functions generated code: ",e)}));var n=function(e){return"".concat(r,"/").concat(c()(e),".js")};return{getIncludeFileFor:function(e){return n(e)},writeFunctionCode:function(e,r){return new Promise((function(a,o){var i=n(e);t({includeFile:i,content:r}),l.writeFile(i,r,(function(e){if(e)return o(e);a()}))}))},writeBehaviorCode:function(e,r){return new Promise((function(a,o){var i=n(e);t({includeFile:i,content:r}),l.writeFile(i,r,(function(e){if(e)return o(e);a()}))}))},writeObjectCode:function(e,r){return new Promise((function(a,o){var i=n(e);t({includeFile:i,content:r}),l.writeFile(i,r,(function(e){if(e)return o(e);a()}))}))}}}},2301:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(5),a=r(6),o=r(309),i=r(12),c=r.n(i),u=c()("fs-extra"),s=c()("path"),l=c()("@electron/remote"),p=l?l.dialog:null,f=function(e,t){if(!u)return Promise.reject(new Error("Filesystem is not supported."));try{var r=JSON.stringify(e,null,2);return u.ensureDir(s.dirname(t)).then((function(){return new Promise((function(e,n){u.writeFile(t,r,(function(t){return t?n(t):e()}))}))}))}catch(n){return Promise.reject(n)}},d=Object(n.a)((function e(){Object(a.a)(this,e)}));d.chooseEventsFunctionExtensionFile=function(e){if(!p)return Promise.reject("Not supported");var t=l.getCurrentWindow();return p.showSaveDialog(t,{title:"Export an extension of the project",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}],defaultPath:e||"Extension.json"}).then((function(e){var t=e.filePath;return t||null}))},d.writeEventsFunctionsExtension=function(e,t){var r=Object(o.b)(e);return f(r,t).catch((function(e){throw console.error("Unable to write the events function extension:",e),e}))},d.chooseCustomObjectFile=function(e){if(!p)return Promise.reject("Not supported");var t=l.getCurrentWindow();return p.showSaveDialog(t,{title:"Export an object of the project",filters:[{name:"GDevelop 5 object configuration",extensions:["gdo"]}],defaultPath:e||"Object"}).then((function(e){var t=e.filePath;return t||null}))},d.writeCustomObject=function(e,t){var r=e.clone().get();r.setTags(""),r.getVariables().clear(),r.getEffects().clear(),r.getAllBehaviorNames().toJSArray().forEach((function(e){return r.removeBehavior(e)}));var n=Object(o.b)(r);return f(n,t).catch((function(e){throw console.error("Unable to write the object:",e),e}))}},2302:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(5),a=r(6),o=r(12),i=r.n(o),c=i()("fs"),u=i()("@electron/remote"),s=u?u.dialog:null,l=Object(n.a)((function e(){Object(a.a)(this,e)}));l.chooseEventsFunctionExtensionFile=function(){if(!s)return Promise.reject("Not supported");var e=u.getCurrentWindow();return s.showOpenDialog(e,{title:"Import an extension in the project",properties:["openFile"],message:"Choose an extension file to import (.json file)",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}]}).then((function(e){var t=e.filePaths;return t&&t.length?t[0]:null}))},l.readEventsFunctionExtensionFile=function(e){return function(e){return c?new Promise((function(t,r){c.readFile(e,{encoding:"utf8"},(function(n,a){if(n)return r(n);try{var o=JSON.parse(a);return t(o)}catch(i){return r(e+" is a corrupted/malformed file.")}}))})):Promise.reject("Filesystem is not supported.")}(e)}},2303:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(17),a=r(12),o=r.n(a),i=r(39),c=o()("electron"),u=c?c.ipcRenderer:null,s=function(){var e=n.useContext(i.a).values.useGDJSDevelopmentWatcher;return n.useEffect((function(){if(e){if(u)return u.send("setup-local-gdjs-development-watcher"),function(){u.send("close-local-gdjs-development-watcher")};console.error("Unable to find ipcRenderer to set up GDJS development watchers")}}),[e]),null}},2304:function(e,t,r){"use strict";(function(e){var n,a=r(1),o=r(2),i=r(0),c=r.n(i),u=r(877),s=r(1269),l=r(471),p=r(513),f=r(415),d=r(331),h=r.n(d),v=r(12),b=r.n(v),m=r(1271),j=r(430),g=r(343),x=r(2305),w=r(2306),O=r(327),y=b()("path"),P=e.gd,k=function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{erroredResources:[]});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(o.a)(c.a.mark((function e(t){var r,n,a,i,u,s,l,p,f,d,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.project,n=t.authenticatedUser,a=t.oldFileMetadata,i=t.newFileMetadata,u=t.onProgress,s={erroredResources:[]},l=i.fileIdentifier,p=r.getResourcesManager(),f=function(e){return p.getAllResourceNames().toJSArray().map((function(e){var t=p.getResource(e),r=t.getFile();return Object(O.h)(r)?Object(j.c)(r)?null:Object(O.e)(r)?(s.erroredResources.push({resourceName:t.getName(),error:new Error("Unsupported blob URL.")}),null):null:t})).filter(Boolean)}(),d=y.dirname(a.fileIdentifier),h=0,e.next=10,Object(x.a)(f,{transformItem:function(){var e=Object(o.a)(c.a.mark((function e(t){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.resolve(d,t.getFile()),e.prev=1,e.next=4,Object(w.a)(r);case 4:return n=e.sent,e.abrupt("return",{resource:t,file:n});case 8:return e.prev=8,e.t0=e.catch(1),s.erroredResources.push({resourceName:t.getName(),error:new Error("Unable to open the file (".concat(r,")."))}),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),isChunkTooBig:function(e){return e.length>70||e.filter(Boolean).reduce((function(e,t){return e+t.file.size}),0)>15e7},processChunk:function(){var e=Object(o.a)(c.a.mark((function e(t){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.filter(Boolean),e.next=3,Object(g.k)(n,l);case 3:return e.next=5,Object(g.r)(n,l,r.map((function(e){return e.file})),(function(e,t){u(h+e,f.length)}));case 5:a=e.sent,h+=t.length,a.forEach((function(e,t){var n=e.url,a=e.error,o=r[t].resource;!a&&n?o.setFile(n):s.erroredResources.push({resourceName:o.getName(),error:a||new Error("Unknown error during upload.")})}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=(n={},Object(a.a)(n,"".concat(u.a.internalName,"=>").concat(u.a.internalName),function(){var e=Object(o.a)(c.a.mark((function e(t){var r,n,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.project,n=t.newFileMetadata,a=y.dirname(n.fileIdentifier),o=h()(new P.AbstractFileSystemJS,new f.a),P.ProjectResourcesCopier.copyAllResourcesTo(r,o,a,!0,!1,!0),e.abrupt("return",{erroredResources:[]});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(a.a)(n,"".concat(p.a.internalName,"=>").concat(u.a.internalName),(function(e){var t=e.project,r=e.newFileMetadata,n=e.onProgress;return Object(s.a)({project:t,fileMetadata:r,onProgress:n})})),Object(a.a)(n,"".concat(l.a.internalName,"=>").concat(u.a.internalName),(function(e){var t=e.project,r=e.newFileMetadata,n=e.onProgress;return Object(s.a)({project:t,fileMetadata:r,onProgress:n})})),Object(a.a)(n,"".concat(u.a.internalName,"=>").concat(p.a.internalName),S),Object(a.a)(n,"".concat(p.a.internalName,"=>").concat(p.a.internalName),m.a),Object(a.a)(n,"".concat(l.a.internalName,"=>").concat(p.a.internalName),k),n),F={moveAllProjectResources:function(){var e=Object(o.a)(c.a.mark((function e(t){var r,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.oldStorageProvider,n=t.newStorageProvider,a=E["".concat(r.internalName,"=>").concat(n.internalName)]){e.next=4;break}throw new Error("Can't find a ResourceMover for ".concat(r.internalName," to ").concat(n.internalName,"."));case 4:return e.abrupt("return",a(t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=F}).call(this,r(38))},2305:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(2),a=r(0),o=r.n(a),i=function(){var e=Object(n.a)(o.a.mark((function e(t,r){var n,a,i,c,u,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.transformItem,a=r.isChunkTooBig,i=r.processChunk,c=0,u=[];case 3:if(!(c<t.length)){e.next=20;break}return e.next=6,n(t[c]);case 6:if(s=e.sent,u.length){e.next=10;break}e.next=16;break;case 10:if(a([].concat(u,[s]))){e.next=13;break}e.next=16;break;case 13:return e.next=15,i(u);case 15:u.length=0;case 16:u.push(s),c++,e.next=3;break;case 20:if(!u.length){e.next=24;break}return e.next=23,i(u);case 23:u.length=0;case 24:return e.abrupt("return");case 25:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},2306:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(2),a=r(0),o=r.n(a),i=r(12),c=r.n(i),u=c()("path"),s=c()("fs"),l=function(){var e=Object(n.a)(o.a.mark((function e(t){var r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,r){s.readFile(t,(function(t,n){t?r(t):e(n)}))}));case 2:return r=e.sent,n=r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p={aac:"audio/aac",wav:"audio/wav",mp3:"audio/mp3",ogg:"audio/ogg",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",webp:"image/webp",ttf:"font/ttf",otf:"font/otf",mp4:"video/mp4",webm:"video/webm",json:"application/json",xml:"application/xml",gz:"application/gzip",js:"application/javascript"},f=function(){var e=Object(n.a)(o.a.mark((function e(t){var r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t);case 2:return r=e.sent,n=u.extname(t).replace(/^\./,""),e.abrupt("return",new File([r],u.basename(t),{type:p[n]||"application/octet-stream"}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},2307:function(e,t,r){"use strict";var n,a=r(2),o=r(1),i=r(0),c=r.n(i),u=r(877),s=r(1269),l=r(471),p=r(513),f=r(1272),d=r(1273),h=(n={},Object(o.a)(n,p.a.internalName,d.a),Object(o.a)(n,u.a.internalName,s.a),Object(o.a)(n,l.a.internalName,f.a),n),v={fetchAllProjectResources:function(){var e=Object(a.a)(c.a.mark((function e(t){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.storageProvider,n=h[r.internalName]){e.next=4;break}throw new Error("Can't find a ResourceFetcher for ".concat(r.internalName," - have you registered the storage provider here?"));case 4:return e.abrupt("return",n(t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=v},2494:function(e,t,r){"use strict";var n=r(24),a=r(2),o=r(19),i=r(0),c=r.n(i),u=r(11),s=(r(17),r(510)),l=r(879),p=r(327),f=r(12),d=r.n(f),h=r(25),v=r(32),b=r(86),m=d()("fs"),j=d()("path");function g(e,t){return x.apply(this,arguments)}function x(){return(x=Object(a.a)(c.a.mark((function e(t,r){var a,o,i,u,s,l,p,f,d,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m&&j){e.next=2;break}return e.abrupt("return");case 2:a=j.dirname(t.getProjectFile()),o=[],i=Object(n.a)(r.values()),e.prev=5,i.s();case 7:if((u=i.n()).done){e.next=31;break}if(s=u.value,l=s.hasAnyEmbeddedResourceOutsideProjectFolder,p=s.embeddedResources,l){e.next=11;break}return e.abrupt("continue",29);case 11:f=Object(n.a)(p.values()),e.prev=12,h=function(){var e=d.value;if(!e.isOutsideProjectFolder)return"continue";var t=j.basename(e.fullPath),r=j.extname(t),n=j.basename(t,r),i=Object(b.a)(n,(function(e){var t=j.join(a,e)+r;return m.existsSync(t)})),c=j.join(a,i+r);e.resourceName=i+r,o.push(m.promises.copyFile(e.fullPath,c))},f.s();case 15:if((d=f.n()).done){e.next=21;break}if("continue"!==h()){e.next=19;break}return e.abrupt("continue",19);case 19:e.next=15;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(12),f.e(e.t0);case 26:return e.prev=26,f.f(),e.finish(26);case 29:e.next=7;break;case 31:e.next=36;break;case 33:e.prev=33,e.t1=e.catch(5),i.e(e.t1);case 36:return e.prev=36,i.f(),e.finish(36);case 39:return e.abrupt("return",Promise.all(o));case 40:case"end":return e.stop()}}),e,null,[[5,33,36,39],[12,23,26,29]])})))).apply(this,arguments)}function w(e,t){var r,a=j.dirname(e.getProjectFile()),o=new Map,i=Object(n.a)(t);try{for(i.s();!(r=i.n()).done;){var c,u=Object(v.a)(r.value,2),l=u[0],p=u[1].embeddedResources,f={},d=Object(n.a)(p.values());try{for(d.s();!(c=d.n()).done;){var h=c.value,b=h.resourceKind,m=h.resourceName,g=h.relPath,x=h.fullPath;m||(m=j.relative(a,x));var w=Object(s.b)(b);w&&(w.setName(m),w.setFile(m),f[g]=m,e.getResourcesManager().addResource(w))}}catch(O){d.e(O)}finally{d.f()}o.set(l,{mapping:f})}}catch(O){i.e(O)}finally{i.f()}return o}function O(e,t){return y.apply(this,arguments)}function y(){return(y=Object(a.a)(c.a.mark((function e(t,r){var a,o,i,u,s,l,f,d,h,v,b,g,x,w,O,y,P,k,S;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m&&j){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,m.promises.readFile(r,"utf8");case 4:if(a=e.sent,e.prev=5,!(o=JSON.parse(a))||!o.__header__||"LDtk"!==o.__header__.app){e.next=16;break}i=j.dirname(r),u=new Map,s=!1,l=Object(n.a)(o.defs.tilesets);try{for(l.s();!(f=l.n()).done;)(d=f.value).relPath&&(h=d.relPath,v=j.resolve(i,h),b=!Object(p.g)(t,v),g={resourceKind:"image",relPath:h,fullPath:v,isOutsideProjectFolder:b},u.set(h,g),b&&(s=!0))}catch(c){l.e(c)}finally{l.f()}x=Object(n.a)(o.levels);try{for(x.s();!(w=x.n()).done;)(O=w.value).bgRelPath&&(y=O.bgRelPath,P=j.resolve(i,y),k=!Object(p.g)(t,P),S={resourceKind:"image",relPath:y,fullPath:P,isOutsideProjectFolder:k},u.set(O.bgRelPath,S),k&&(s=!0))}catch(c){x.e(c)}finally{x.f()}return e.abrupt("return",{hasAnyEmbeddedResourceOutsideProjectFolder:s,embeddedResources:u});case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(5),console.error("Unable to read properly the data from file ".concat(r," for use as a tilemap - ignoring any potentially embedded resources.")),e.abrupt("return",null);case 22:case"end":return e.stop()}}),e,null,[[5,18]])})))).apply(this,arguments)}var P={tilemap:O,json:O},k=r(267),S=r(275),E=r(1262),F=r(8),D=d()("@electron/remote"),C=D?D.dialog:null,N=d()("path"),R=function(e){var t=e.options,r=e.onChooseResources,n=e.createNewResource;return Object(F.jsx)(l.a,{onChoose:function(e){var t=e.url,a=n();a.setFile(t),a.setName(N.basename(t)),a.setOrigin("gdevelop-asset-store",t),r([a])},resourceKind:t.resourceKind})},A=[].concat(Object(o.a)(s.a.map((function(e){var t=e.kind,r=(e.displayName,e.fileExtensions),o=e.createNewResource,i=function(){var e=Object(a.a)(c.a.mark((function e(a){var i,u,s,l,f,d,v,b,m,j,x,O,y,k,S,E,F,R,A,L,T;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.i18n,u=a.getLastUsedPath,s=a.setLastUsedPath,l=a.project,f=a.options,C){e.next=3;break}throw new Error("Electron dialog not supported in this environment.");case 3:return d=["openFile"],f.multiSelection&&d.push("multiSelections"),v=N.dirname(l.getProjectFile()),b=u(l,t)||v,m=D.getCurrentWindow(),e.next=10,C.showOpenDialog(m,{title:i._({id:"Choose a file"}),properties:d,filters:[{name:i._({id:"Supported files"}),extensions:r}],defaultPath:b});case 10:if(j=e.sent,(x=j.filePaths)&&x.length){e.next=14;break}return e.abrupt("return",[]);case 14:if(O=N.parse(x[0]).dir,s(l,t,O),y=x.some((function(e){return!Object(p.g)(l,e)})),k=new Map,!(S=P[t])){e.next=39;break}E=Object(n.a)(x),e.prev=21,E.s();case 23:if((F=E.n()).done){e.next=31;break}return R=F.value,e.next=27,S(l,R);case 27:(A=e.sent)&&(k.set(R,A),A.hasAnyEmbeddedResourceOutsideProjectFolder&&(y=!0));case 29:e.next=23;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(21),E.e(e.t0);case 36:return e.prev=36,E.f(),e.finish(36);case 39:if(L=new Map,T=new Map,!y){e.next=49;break}if(!h.b.showConfirmDialog(i._({id:"This/these file(s) are outside the project folder. Would you like to make a copy of them in your project folder first (recommended)?"}))){e.next=49;break}return e.next=46,Object(p.b)(l,x,L);case 46:return x=e.sent,e.next=49,g(l,k);case 49:return T=w(l,k),e.abrupt("return",x.map((function(e){var t=o();t.setFile(N.relative(v,e)),t.setName(N.relative(v,e));var r=L.has(e)?L.get(e):e;if(r){var n=T.get(r);n&&n.mapping&&t.setMetadata(JSON.stringify({embeddedResourcesMapping:n.mapping}))}return t})));case 51:case"end":return e.stop()}}),e,null,[[21,33,36,39]])})));return function(t){return e.apply(this,arguments)}}();return{name:"local-file-opener-"+t,displayName:{id:"Choose a file"},displayTab:"import",onlyForStorageProvider:"LocalFile",kind:t,selectResourcesHeadless:i,renderComponent:function(e){return Object(F.jsx)(k.c,{justifyContent:"center",children:Object(F.jsx)(S.a,{primary:!0,label:e.options.multiSelection?Object(F.jsx)(u.Trans,{id:"Choose one or more files"}):Object(F.jsx)(u.Trans,{id:"Choose a file"}),onClick:Object(a.a)(c.a.mark((function t(){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i({i18n:e.i18n,project:e.project,fileMetadata:e.fileMetadata,getStorageProvider:e.getStorageProvider,getLastUsedPath:e.getLastUsedPath,setLastUsedPath:e.setLastUsedPath,options:e.options});case 2:r=t.sent,e.onChooseResources(r);case 4:case"end":return t.stop()}}),t)})))})})}}}))),Object(o.a)(s.a.map((function(e){var t=e.kind,r=e.createNewResource;return{name:"upload-".concat(t),displayName:{id:"File(s) from your device"},displayTab:"import",onlyForStorageProvider:"Cloud",kind:t,renderComponent:function(e){return Object(F.jsx)(E.a,{createNewResource:r,onChooseResources:e.onChooseResources,options:e.options,fileMetadata:e.fileMetadata,getStorageProvider:e.getStorageProvider,automaticallyOpenInput:!!e.automaticallyOpenIfPossible},"url-chooser-".concat(t))}}}))),Object(o.a)(s.a.map((function(e){var t=e.kind,r=e.createNewResource;return{name:"resource-store-".concat(t),displayName:{id:"Choose from asset store"},displayTab:"standalone",kind:t,renderComponent:function(e){return Object(F.jsx)(R,{createNewResource:r,onChooseResources:e.onChooseResources,options:e.options},"resource-store-".concat(t))}}}))));t.a=A},261:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"create",(function(){return D}));var n=r(3),a=(r(17),r(899)),o=r(25),i=r(1285),c=(r(97),r(153),r(2494)),u=r(2271),s=r(2272),l=r(2277),p=r(2286),f=r(2287),d=r.n(f),h=r(2289),v=r(568),b=r(352),m=r(1279),j=r(2301),g=r(2302),x=r(569),w=r(877),O=r(2303),y=r(513),P=r(471),k=r(2304),S=r(2307),E=r(8),F=e.gd,D=function(e){o.b.setUpContextMenu();var t=o.b.getArguments(),r=o.b.isDev();return Object(E.jsx)(m.a,{authentication:e,disableCheckForUpdates:!!t["disable-update-check"],makeEventsFunctionCodeWriter:h.a,eventsFunctionsExtensionWriter:j.a,eventsFunctionsExtensionOpener:g.a,children:function(e){var o=e.i18n;return Object(E.jsx)(x.a,{appArguments:t,storageProviders:[w.a,P.a,y.a],defaultStorageProvider:w.a,children:function(e){var t=e.getStorageProviderOperations,f=e.storageProviders,h=e.initialFileMetadataToOpen,m=e.getStorageProvider;return Object(E.jsx)(a.a,{i18n:o,renderMainMenu:function(e,t){return Object(E.jsx)(p.a,{props:e,callbacks:t})},renderPreviewLauncher:function(e,t){return Object(E.jsx)(s.a,Object(n.a)(Object(n.a)({},e),{},{ref:t}))},renderExportDialog:function(e){return Object(E.jsx)(i.a,{project:e.project,onSaveProject:e.onSaveProject,onChangeSubscription:e.onChangeSubscription,onClose:e.onClose,automatedExporters:l.a,manualExporters:l.b,onlineWebExporter:l.c})},renderGDJSDevelopmentWatcher:r?function(){return Object(E.jsx)(O.a,{})}:null,storageProviders:f,resourceMover:k.a,resourceFetcher:S.a,getStorageProviderOperations:t,getStorageProvider:m,resourceSources:c.a,resourceExternalEditors:u.a,extensionsLoader:d()({gd:F,objectsEditorService:v.a,objectsRenderingService:b.a,filterExamples:!r}),initialFileMetadataToOpen:h})}})}})}}.call(this,r(38))},415:function(e,t,r){"use strict";(function(e){var n=r(5),a=r(6),o=r(12),i=r.n(o),c=r(1264),u=r(327),s=i()("fs-extra"),l=i()("path"),p=i()("os"),f=e.gd,d=l.posix||l,h=Object(n.a)((function e(t){var r=this;Object(a.a)(this,e),this._filesToDownload={},this.getAllUrlFilesIn=function(e){var t=d.normalize(e).replace(/\\/g,"/");return Object.keys(r._filesToDownload).filter((function(e){return 0===e.indexOf(t)})).map((function(e){return{filePath:e,url:r._filesToDownload[e]}}))},this.mkDir=function(e){if(!Object(u.h)(e)){try{s.mkdirsSync(e)}catch(t){return console.error("mkDir("+e+") failed: "+t),!1}return!0}},this.dirExists=function(e){return!!Object(u.h)(e)||s.existsSync(e)},this.clearDir=function(e){try{s.emptyDirSync(e)}catch(t){console.error("clearDir("+e+") failed: "+t)}},this.getTempDir=function(){return l.join(p.tmpdir(),"GDTMP-".concat(Object(c.a)()))},this.fileNameFrom=function(e){return!r._downloadUrlsToLocalFiles&&Object(u.h)(e)?e:l.basename(e)},this.dirNameFrom=function(e){return l.dirname(e).replace(/\\/g,"/")},this.makeAbsolute=function(e,t){return Object(u.h)(e)?e:(r.isAbsolute(t)||(t=l.resolve(t)),l.resolve(t,l.normalize(e)).replace(/\\/g,"/"))},this.makeRelative=function(e,t){return Object(u.h)(e)?e:l.relative(t,l.normalize(e)).replace(/\\/g,"/")},this.isAbsolute=function(e){return!!Object(u.h)(e)||(0===e.length||(e.length>0&&"/"===e.charAt(0)||e.length>1&&":"===e.charAt(1)))},this.copyFile=function(e,t){if(Object(u.h)(e))return!r._downloadUrlsToLocalFiles||(Object(u.h)(t)?(console.error("Destination can't be a URL in copyFile (from ".concat(e," to ").concat(t,").")),!1):(r._filesToDownload[d.normalize(t)]=e,!0));try{e!==t&&s.copySync(e,t)}catch(n){return console.error("copyFile("+e+", "+t+") failed: "+n),!1}return!0},this.writeToFile=function(e,t){try{s.outputFileSync(e,t)}catch(r){return console.error("writeToFile("+e+", ...) failed: "+r),!1}return!0},this.readFile=function(e){try{return s.readFileSync(e).toString()}catch(t){return console.error("readFile("+e+") failed: "+t),""}},this.readDir=function(e,t){t=t.toUpperCase();var r=new f.VectorString;try{s.existsSync(e)&&s.readdirSync(e).forEach((function(n){0!==t.length&&-1===n.toUpperCase().indexOf(t,n.length-t.length)||r.push_back(e+"/"+n)}))}catch(n){console.error("readDir("+e+","+t+") failed: "+n)}return r},this.fileExists=function(e){var t=d.normalize(e);if(!!r._filesToDownload[t])return!0;try{return s.statSync(e).isFile()}catch(n){return!1}},this._downloadUrlsToLocalFiles=!!t&&t.downloadUrlsToLocalFiles}));t.a=h}).call(this,r(38))},473:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(2),a=r(0),o=r.n(a),i=r(453),c=r.n(i),u=r(1265),s=r(12),l=r.n(s)()("electron"),p=l?l.ipcRenderer:null,f=function(){var e=Object(n.a)(o.a.mark((function e(t){var r,a,i,s,l,f,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.urlContainers,a=t.onProgress,i=t.throwIfAnyError,s=0,l=null,p){e.next=5;break}throw new Error("Download to local files is not supported.");case 5:return e.next=7,c.a.withConcurrency(20).for(r).process(function(){var e=Object(n.a)(o.a.mark((function e(t){var i,c,f,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.url,c=t.filePath,e.prev=1,e.next=4,Object(u.a)({times:2},Object(n.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.invoke("local-file-download",i,c);case 2:case"end":return e.stop()}}),e)}))));case 4:return f={item:t},e.abrupt("return",f);case 8:return e.prev=8,e.t0=e.catch(1),l=e.t0,d={item:t,error:e.t0},e.abrupt("return",d);case 13:return e.prev=13,a(s++,r.length),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,8,13,16]])})));return function(t){return e.apply(this,arguments)}}());case 7:if(f=e.sent,d=f.results,!i||!l){e.next=11;break}throw l;case 11:return e.abrupt("return",d);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},684:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(12),a=r.n(n),o=r(767),i=a()("fs"),c=Object(o.a)("archiver"),u=function(e){var t=e.path,r=e.outputFilename,n=e.sizeLimit,a=c();return new Promise((function(e,o){if(!i||!a)return o(new Error("Archiver unavailable"));var c=i.createWriteStream(r),u=a("zip",{zlib:{level:9}});c.on("close",(function(){var t=u.pointer();if(console.log("Archive written at ".concat(r,", ").concat(t," total bytes.")),n&&t>n){var a=Math.round(t/1e6);o(new Error("Archive is of size ".concat(a," MB, which is above the limit allowed of ").concat(n/1e6," MB.")))}e(r)})),u.on("error",(function(e){o(e)})),u.pipe(c),u.directory(t,!1),u.finalize()}))}},872:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(12),a=r.n(n)()("electron"),o=a?a.ipcRenderer:null,i=function(e,t,r){return o?(o.removeAllListeners("local-file-upload-progress"),o.removeAllListeners("local-file-upload-done"),new Promise((function(n,a){o.on("local-file-upload-progress",(function(e,t,n){r(t,n)})),o.on("local-file-upload-done",(function(e,t){if(t)return a(t);n()})),o.send("local-file-upload",e,t)}))):Promise.reject("No support for local file upload")}},877:function(e,t,r){"use strict";var n=r(17),a=r.n(n),o=r(3),i=r(2),c=r(0),u=r.n(c),s=r(12),l=r.n(s),p=r(1),f=r(86),d=r(646),h=r.n(d),v=function(e,t){var r=t.isReferenceMagicPropertyName,n=t.getReferencePartialObject,a=t.maxUnsplitDepth;return function e(t,o){if(void 0!==a&&o>=a)return Promise.resolve();if(null!==t&&"object"===typeof t){var i=Object.keys(t);if(i)return Promise.all(i.map((function(a){var i=function(e){return!0===e[r]?e:null}(t[a]);return i?n(i.referenceTo).then((function(r){return t[a]=r,e(t[a],o+1)})):e(t[a],o+1)}))).then((function(){}))}return Promise.resolve()}(e,0)},b=function(e){var t={};return function(r,n){var a=r[e];if("string"!==typeof a)throw new Error("Property ".concat(e," is not a string"));t[n]=t[n]||{};var o=Object(f.a)(h()(a),(function(e){return!!t[n][e]}));return t[n][o]=!0,o}},m=l()("fs"),j=l()("path"),g=l()("@electron/remote"),x=g?g.dialog:null,w=function(e){return m?new Promise((function(t,r){m.readFile(e,{encoding:"utf8"},(function(n,a){if(n)return r(n);try{var o=JSON.parse(a);return t(o)}catch(i){return r(e+" is a corrupted/malformed file.")}}))})):Promise.reject("Filesystem is not supported.")},O=function(){if(!x)return Promise.reject("Not supported");var e=g.getCurrentWindow();return x.showOpenDialog(e,{title:"Open a project",properties:["openFile"],message:"If you want to open your GDevelop 4 project, be sure to save it as a .json file",filters:[{name:"GDevelop 5 project",extensions:["json"]}]}).then((function(e){var t=e.filePaths;return t&&t.length?{fileIdentifier:t[0]}:null}))},y=function(e){var t=e.fileIdentifier,r=j.dirname(t);return w(t).then((function(e){return v(e,{getReferencePartialObject:function(e){return w(j.join(r,e)+".json")},isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT",maxUnsplitDepth:3}).then((function(){return{content:e}}))}))},P=function(){var e=Object(i.a)(u.a.mark((function e(t,r){var n,a,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.fileIdentifier,a=n+".autosave",!m.existsSync(a)){e.next=17;break}if(r){e.next=5;break}return e.abrupt("return",!0);case 5:if(e.prev=5,o=m.statSync(a).mtime.getTime(),i=m.statSync(n).mtime.getTime(),!(o>i+5e3)){e.next=10;break}return e.abrupt("return",!0);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(5),console.error("Unable to compare *.autosave to project",e.t0),e.abrupt("return",!1);case 16:case 17:return e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r){return e.apply(this,arguments)}}(),k=function(e){return Promise.resolve(Object(o.a)(Object(o.a)({},e),{},{fileIdentifier:e.fileIdentifier+".autosave"}))},S=r(309),E=r(529),F=r(8),D=l()("fs-extra"),C=l()("path"),N=l()("@electron/remote"),R=N?N.dialog:null,A=function(e,t){var r=performance.now();return new Promise((function(n,a){D.readFile(e,{encoding:"utf8"},(function(o,i){if(o)return a(o);""===i&&a(new Error("Written file is empty, did the write fail?")),i!==t&&a(new Error("Written file is not containing the expected content, did the write fail?"));var c=performance.now()-r;console.info("Verified ".concat(e," content in ").concat(c.toFixed(),"ms.")),n()}))}))},L=function(){var e=Object(i.a)(u.a.mark((function e(t,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D){e.next=2;break}throw new Error("Filesystem is not supported.");case 2:if(""!==t){e.next=4;break}throw new Error("The content to save on disk is empty. Aborting.");case 4:return e.next=6,D.ensureDir(C.dirname(r));case 6:return e.next=8,D.writeFile(r,t);case 8:return e.next=10,A(r,t);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify(t,null,2),e.next=3,L(n,r);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),I=function(e,t,r){var n,a=Object(S.b)(e);if(e.isFolderProject()){var o=function(e,t){var r=t.pathSeparator,n=t.getArrayItemReferenceName,a=t.shouldSplit,o=t.isReferenceMagicPropertyName,i=[],c=function(e,t){var r;return i.push({reference:e,object:t}),r={},Object(p.a)(r,o,!0),Object(p.a)(r,"referenceTo",e),r};return function e(t,o,i){if(null!==t&&"object"===typeof t)if(Array.isArray(t))for(var u in t){var s=o+r+"*";if(a(s)){var l=t[u],p=n(l,i),f=i+r+p;t[u]=c(f,l),e(l,s,f)}else{var d=i+r+u;e(t[u],s,d)}}else for(var h in t){var v=o+r+h,b=i+r+h;if(a(v)){var m=t[h];t[h]=c(b,m),e(m,v,b)}else e(t[h],v,b)}}(e,"",""),i}(a,{pathSeparator:"/",getArrayItemReferenceName:b("name"),shouldSplit:(n=new Set(["/layouts/*","/externalLayouts/*","/externalEvents/*","/layouts/*","/eventsFunctionsExtensions/*"]),function(e){return n.has(e)}),isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT"});return Promise.all(o.map((function(e){return T(e.object,C.join(r,e.reference)+".json").catch((function(e){throw console.error("Unable to write a partial file:",e),e}))}))).then((function(){return T(a,t).catch((function(e){throw console.error("Unable to write the split project:",e),e}))}))}return T(a,t).catch((function(e){throw console.error("Unable to write the project:",e),e}))},M=function(e,t){var r=t.fileIdentifier,n=Date.now();if(!r)return Promise.reject('Project file is empty, "Save as" should have been called?');var a=Object(o.a)(Object(o.a)({},t),{},{name:e.getName(),gameId:e.getProjectUuid(),lastModifiedDate:n}),i=C.dirname(r);return I(e,r,i).then((function(){return{wasSaved:!0,fileMetadata:a}}))},U=function(){var e=Object(i.a)(u.a.mark((function e(t){var r,n,a,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.project,r=t.fileMetadata,n=r?r.fileIdentifier:"",a=N.getCurrentWindow(),o={defaultPath:n,filters:[{name:"GDevelop 5 project",extensions:["json"]}]},R){e.next=6;break}throw new Error("Unsupported");case 6:if(i=R.showSaveDialogSync(a,o)){e.next=9;break}return e.abrupt("return",{saveAsLocation:null});case 9:return e.abrupt("return",{saveAsLocation:{fileIdentifier:i}});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(i.a)(u.a.mark((function e(t,r,n){var a,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}throw new Error("A location was not chosen before saving as.");case 2:if(a=r.fileIdentifier){e.next=5;break}throw new Error("A file path was not chosen before saving as.");case 5:return n.onStartSaving(),o={fileIdentifier:a,name:t.getName(),gameId:t.getProjectUuid(),lastModifiedDate:Date.now()},e.next=9,n.onMoveResources({newFileMetadata:o});case 9:return i=C.dirname(a),t.setProjectFile(a),e.next=13,I(t,a,i);case 13:return e.abrupt("return",{wasSaved:!0,fileMetadata:o});case 14:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),W=function(e,t){var r=t.fileIdentifier+".autosave";return L(Object(S.a)(e),r).catch((function(e){throw console.error("Unable to write ".concat(r,":"),e),e}))},B=function(e){return{id:"An error occurred when saving the project. Please try again by choosing another location."}},G=r(25),_=r(901),H=a.a.memo((function(e){return Object(F.jsx)(_.a,Object(o.a)(Object(o.a)({},e),{},{viewBox:"0 0 16 16",style:{fill:"none"},children:Object(F.jsx)("path",{d:"M5.75 11.25C5.75 11.25 6 14.25 4 15.25H12C10 14.25 10.25 11.25 10.25 11.25M5.75 11.25H13.25C14.3546 11.25 15.25 10.3546 15.25 9.25V2.75C15.25 1.64543 14.3546 0.75 13.25 0.75H2.75C1.64543 0.75 0.75 1.64543 0.75 2.75V9.25C0.75 10.3546 1.64543 11.25 2.75 11.25H5.75Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}))}));t.a={internalName:"LocalFile",name:{id:"Your computer"},renderIcon:function(e){return Object(F.jsx)(H,{fontSize:e.size})},getFileMetadataFromAppArguments:function(e){return e[G.a]&&e[G.a].length?{fileIdentifier:e[G.a][0]}:null},onRenderNewProjectSaveAsLocationChooser:function(e){var t=e.saveAsLocation,r=e.setSaveAsLocation,n=e.newProjectsDefaultFolder,a=t?C.dirname(t.fileIdentifier):n||"";return t||r({fileIdentifier:C.join(a,"game.json")}),Object(F.jsx)(E.a,{fullWidth:!0,value:a,onChange:function(e){return r({fileIdentifier:C.join(e,"game.json")})},type:"create-game"})},createOperations:function(){return{onOpenWithPicker:O,onOpen:y,hasAutoSave:P,onSaveProject:M,onChooseSaveProjectAsLocation:U,onSaveProjectAs:J,onAutoSaveProject:W,onGetAutoSave:k,getOpenErrorMessage:function(e){return{id:"Check that the file exists, that this file is a proper game created with GDevelop and that you have the authorization to open it."}},getWriteErrorMessage:B}}}}}]);
//# sourceMappingURL=local-app.e6076f81.chunk.js.map